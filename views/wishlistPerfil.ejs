<head>
  <meta charset="UTF-8">
  <title>Footlaces | Lista de deseos</title>
  <link rel="icon" href="/images/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="/stylesheets/perfil.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<%- include("partials/header", { user: user }) %>

<div class="perfil-container">
  <div class="sidebar">
    <ul>
      <li><strong class="traduccion" data-es="ğŸ“Š Panel de control" data-en="ğŸ“Š Dashboard">ğŸ“Š Panel de control</strong></li>
      <li><a href="/perfil" class="traduccion" data-es="ğŸ“ Direcciones (<%= user.direcciones?.length || 0 %>)" data-en="ğŸ“ Addresses (<%= user.direcciones?.length || 0 %>)">ğŸ“ Direcciones (<%= user.direcciones?.length || 0 %>)</a></li>
      <li><strong class="traduccion" data-es="ğŸ’– Lista de deseos (<%= user.wishlist?.length || 0 %>)" data-en="ğŸ’– Wishlist (<%= user.wishlist?.length || 0 %>)">ğŸ’– Lista de deseos (<%= user.wishlist?.length || 0 %>)</strong></li>
      <li><a href="/perfil/ventas" class="traduccion" data-es="ğŸ“¦ Ventas" data-en="ğŸ“¦ Sales">ğŸ“¦ Ventas</a></li>
      <li><a href="/logout" class="logout traduccion" data-es="â†© Cerrar sesiÃ³n" data-en="â†© Log out">â†© Cerrar sesiÃ³n</a></li>
    </ul>
  </div>

  <div class="perfil-main">
    <h2 class="traduccion" data-es="Tu lista de deseos" data-en="Your Wishlist">Tu lista de deseos</h2>

    <% if (!wishlist || wishlist.length === 0) { %>
      <p class="traduccion" data-es="ğŸ’” AÃºn no has aÃ±adido productos a tu lista de deseos." data-en="ğŸ’” You haven't added any products to your wishlist yet.">ğŸ’” AÃºn no has aÃ±adido productos a tu lista de deseos.</p>
    <% } else { %>
      <div class="tarjetas-deseos">
        <% wishlist.forEach(producto => { %>
          <div class="tarjeta-producto">
            <a href="/producto/<%= producto._id %>" class="card-producto-link">
              <img src="<%= producto.imagenes[0] %>" alt="<%= producto.nombre %>">
              <div class="info-producto">
                <p class="nombre-producto"><%= producto.nombre %></p>
                <p class="precio-producto traduccion" data-es="Desde <%= Math.min(...producto.tallas.map(t => t.precio)) %>â‚¬" data-en="From <%= Math.min(...producto.tallas.map(t => t.precio)) %>â‚¬">Desde <%= Math.min(...producto.tallas.map(t => t.precio)) %>â‚¬</p>
              </div>
            </a>
          </div>
        <% }) %>
      </div>
    <% } %>
  </div>
</div>

<script>
  const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
  if (prefersDark) {
    document.documentElement.setAttribute('data-theme', 'dark');
    document.body.classList.add('dark');
  } else {
    document.documentElement.setAttribute('data-theme', 'light');
    document.body.classList.add('light');
  }
</script>
<%- include('partials/footer') %>